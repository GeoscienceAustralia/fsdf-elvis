"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(e){function t(e,t){var n=this;t.getConfig().then(function(e){n.data=e;try{var t=document.createElement("canvas");e.modern=!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(a){e.modern=!1}})}e.module("PlacenamesApp",["placenames.classifications","placenames.header","placenames.panes","placenames.results","placenames.templates","placenames.search","placenames.toolbar","placenames.utils","geo.map","common.altthemes","common.baselayer.control","common.navigation","common.proxy","common.scroll","common.storage","common.templates","explorer.config","explorer.confirm","explorer.drag","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.httpdata","explorer.info","explorer.legend","explorer.message","explorer.modal","explorer.projects","explorer.tabs","explorer.version","exp.ui.templates","ui.bootstrap","ui.bootstrap-slider","ngAutocomplete","ngRoute","ngSanitize","page.footer"]).config(["configServiceProvider","projectsServiceProvider","versionServiceProvider",function(e,t,n){e.location("icsm/resources/config/placenames.json"),e.dynamicLocation("icsm/resources/config/appConfig.json?t="),n.url("icsm/assets/package.json"),t.setProject("icsm")}]).run(["mapService",function(e){e.getMap().then(function(e){e.options.maxZoom=16})}]).factory("userService",[function(){function e(){return!0}return{login:e,hasAcceptedTerms:e,setAcceptedTerms:e,getUsername:function(){return"anon"}}}]).controller("RootCtrl",t),t.$invoke=["$http","configService"]}(angular),function(e){e.module("placenames.authorities",[]).directive("pnAuthorities",[function(){return{restrict:"EA",templateUrl:"placenames/authorities/authorities.html",bindToController:{authorities:"=",update:"&"},controller:function(){console.log(this.authorities)},controllerAs:"pa"}}]).directive("pnAuthoritiesPills",[function(){return{restrict:"EA",template:'<span class="pn-authorities-pills" pn-pills pills="pap.authorities" class="pn-feature-pills" update="pap.update()"></span>',bindToController:{authorities:"=",update:"&"},controller:function(){},controllerAs:"pap"}}])}(angular),function(e){e.module("placenames.classifications",[]).directive("pnClassifications",[function(){return{restrict:"EA",templateUrl:"placenames/classifications/classifications.html",bindToController:{classifications:"=",update:"&"},controller:function(){console.log(this.classifications)},controllerAs:"pc"}}]).directive("pnClassificationsPills",[function(){return{restrict:"EA",template:'<span pn-pills class="pn-classifications-pills" pills="pcp.classifications" class="pn-feature-pills" update="pcp.update()"></span>',bindToController:{classifications:"=",update:"&"},controller:function(){},controllerAs:"pcp"}}])}(angular),function(e){e.module("placenames.facets",[]).factory("pnFacetsService",["$http","$q","$rootScope","configService","proxy",function(e,t,n,a,r){function i(e,t){h.getAuthorities().then(function(){l(d,t.authority)}),h.getFeatureCodes().then(function(){l(m,t.featureCode)}),h.getClassifications().then(function(){l(f,t.classification)})}function s(){return a.getConfig("featureCodes")}function o(){return a.getConfig("authorities")}function c(){return a.getConfig("facetsQuery").then(function(t){return e.get(t,p).then(function(e){return e.data.facet_counts.facet_fields})})}function l(e,t){var n,a={};t.forEach(function(e,t){t%2===0?n=e:a[n]=e}),e.forEach(function(e){var t=a[e.code];e.count=t?t:0})}function u(e){var t,n=[];return e.forEach(function(e,a){a%2?n.push({code:t,name:t,total:e}):t=e}),n}var p={cache:!0},d=[],f=[],m=[],h={getFeatureCodes:function(){return m.length||s().then(function(e){c().then(function(t){m.push.apply(m,_toConsumableArray(u(t.featureCode).map(function(t){return t.name=e[t.code],t})))})}),t.when(m)},getAuthorities:function(){return d.length||o().then(function(e){c().then(function(t){d.push.apply(d,_toConsumableArray(u(t.authority).map(function(t){return t.name=e[t.code].name,t.jurisdiction=e[t.code].jurisdiction,t})))})}),t.when(d)},getClassifications:function(){return f.length||c().then(function(e){f.push.apply(f,_toConsumableArray(u(e.classification)))}),t.when(f)}};return n.$on("pn.facets.changed",i),h}])}(angular),function(e){e.module("placenames.featuretypes",["placenames.pills"]).directive("pnFeaturetypes",[function(){return{restrict:"EA",templateUrl:"placenames/featuretypes/featuretypes.html",bindToController:{types:"=",update:"&"},controller:function(){console.log(this.types)},controllerAs:"vm"}}]).directive("pnFeaturetypesPills",[function(){return{restrict:"EA",template:'<pn-pills pills="pfp.features" class="pn-feature-pills" update="pfp.update()"></pn-pills>',bindToController:{features:"=",update:"&"},controller:function(){},controllerAs:"pfp"}}]).filter("pnHasName",function(){return function(e){return(e?e:[]).filter(function(e){return!!e.name})}})}(angular),function(e){e.module("placenames.header",[]).controller("headerController",["$scope","$q","$timeout",function(e,t,n){var a=function(e){return e};e.$on("headerUpdated",function(t,n){e.headerConfig=a(n)})}]).directive("pnHeader",[function(){var t={current:"none",heading:"Place Names",headingtitle:"Place Names",helpurl:"help.html",helptitle:"Get help about Place Names",helpalttext:"Get help about Place Names",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"placenames/header/header.html",scope:{current:"=",breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(n,a,r){e.copy(t);e.forEach(t,function(e,t){t in n||(n[t]=e)})}}}]).factory("headerService",["$http",function(){}])}(angular),function(e){function t(){return{add:function(e){},remove:function(e){}}}var n=function a(e){_classCallCheck(this,a),e.data().then(function(e){this.data=e}.bind(this))};n.$inject=["paneService"],t.$inject=[],e.module("placenames.panes",[]).directive("pnPanes",["$rootScope","$timeout","mapService",function(e,t,n){return{templateUrl:"placenames/panes/panes.html",transclude:!0,scope:{defaultItem:"@",data:"="},controller:["$scope",function(a){var r=!1;a.view=a.defaultItem,a.setView=function(t){var i=a.view;a.view===t?(t&&(r=!0),a.view=""):(t||(r=!0),a.view=t),e.$broadcast("view.changed",a.view,i),r&&n.getMap().then(function(e){e._onResize()})},t(function(){e.$broadcast("view.changed",a.view,null)},50)}]}}]).directive("pnTabs",[function(){return{templateUrl:"placenames/panes/tabs.html",require:"^pnPanes"}}]).controller("PaneCtrl",n).factory("paneService",t)}(angular),function(e){e.module("placenames.results.item",[]).directive("pnResultsItem",["pnItemService","pnResultsService",function(e,t){return{templateUrl:"placenames/results/item.html",bindToController:{item:"="},controller:function(){var n=this;console.log("Creating an item scope"),this.showPan=function(e){t.showPan(e)},this.download=function(t){e[t](this)},t.load(this.item.recordId).then(function(e){n.feature=e.features[0]})},controllerAs:"vm"}}]).factory("pnItemService",["$http","configService",function(e,t){var n={esri:function(e){var t=new Blob([JSON.stringify(e.feature,null,3)],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-esri-feature-"+e.item.recordId+".json")},wfs:function(n){t.getConfig("results").then(function(t){var a=t.wfsTemplate;e.get(a.replace("${id}",n.item.recordId)).then(function(e){var t=new Blob([e.data],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-wfs-feature-"+n.item.recordId+".xml")})})}};return n}])}(angular),function(e){function t(e,t,n,a,r,i,s){var o,c=7,l={showPan:function(e){return this.show(e).then(function(e){var t=e.map;return t.panTo(e.location,{animate:!0}),t.getZoom()<c&&t.setZoom(c,{animate:!0}),e})},show:function(e){return this.hide().then(function(t){var n=e.location.split(" ").reverse().map(function(e){return+e});return o=L.popup().setLatLng(n).setContent(e.name+"<br/>Lat/Lng: "+n[0]+"&deg;"+n[1]+"&deg;").openOn(t),{location:n,map:t,marker:o}})},downloadOld:function(t){this.config.then(function(n){e.get(n.esriTemplate.replace("${id}",t.join(","))).then(function(e){var t=new Blob([JSON.stringify(e,null,3)],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-esri-features-"+Date.now()+".json")})})},download:function(t){this.config.then(function(n){e.get(n.esriTemplate.replace("${id}",t.join(","))).then(function(e){var t=new Blob([JSON.stringify(e,null,3)],{type:"application/json;charset=utf-8"});saveAs(t,"gazetteer-esri-features-"+Date.now()+".json")})})},hide:function(e){return i.getMap().then(function(e){return o&&e.removeLayer(o),e})},get config(){return r.getConfig().then(function(e){return e.results})},load:function(e){return this.config.then(function(n){var a=n.esriTemplate;return t.get(a.replace("${id}",e),{cache:!0}).then(function(e){return e.data})})},moreDocs:function(e){var t=e.data.response,n=t.docs.length;if(!(n>=t.numFound)){var a=e.params;a.start=n,s.request(a).then(function(e){var n;(n=t.docs).push.apply(n,_toConsumableArray(e.response.docs))})}}};return l}e.module("placenames.results",["placenames.results.item","common.scroll"]).directive("pnResults",["pnResultsService",function(e){return{templateUrl:"placenames/results/results.html",restrict:"AE",bindToController:{data:"="},controller:function(){this.clear=function(e){this.data.searched=null},this.more=function(){e.moreDocs(this.data.persist)},this.download=function(){e.download(this.data.persist.data.response.docs.map(function(e){return e.id}))}},controllerAs:"pr",link:function(t){t.$destroy=function(){e.hide()},e.moreDocs(t.pr.data.persist)}}}]).factory("pnResultsService",t),t.$inject=["proxy","$http","$rootScope","$timeout","configService","mapService","pnSearchService"]}(angular);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){function t(e,t,n,a,r){function i(){return s().then(function(e){return o(e).then(function(t){return h.persist(e,t),t})})}function s(){return r.getMap().then(function(e){var t=f.featureCodes,n=t.filter(function(e){return e.selected}),a=f.classifications.filter(function(e){return e.selected}),r=p(),i="object"===_typeof(f.filter),s=i?f.filter.name:f.filter;r.fq=u(e),r.sort=l(e),r.q=s?'"'+s.toLowerCase()+'"':"*:*";var o=[];return n.forEach(function(e){o.push("featureCode:"+e.code)}),a.forEach(function(e){o.push('classification:"'+e.name+'"')}),f.authorities.filter(function(e){return e.selected}).forEach(function(e){o.push("authority:"+e.code)}),o.length&&(r.q+=" AND ("+o.join(" ")+")"),r})}function o(e){return c(e).then(function(e){return e.facetCounts={},t.$broadcast("pn.facets.changed",e.facet_counts.facet_fields),e})}function c(t){return e({url:"/select",method:"GET",params:t,cache:!0}).then(function(e){return e.data})}function l(e){var t=e.getBounds(),n=(t.getEast()-t.getWest())/2,a=(t.getNorth()-t.getSouth())/2;return"geodist(ll,"+(t.getSouth()+a)+","+(t.getWest()+n)+") asc"}function u(e){var t=e.getBounds();return"location:["+Math.max(t.getSouth(),-90)+","+Math.max(t.getWest(),-180)+" TO "+Math.min(t.getNorth(),90)+","+Math.min(t.getEast(),180)+"]"}function p(){return{facet:!0,"facet.field":["featureCode","classification","authority"],rows:15,wt:"json"}}var d,f={searched:null,featureCodes:[],classifications:[],authorities:[]},m=[],h={onMapUpdate:function(e){m.push(e)},offMapUpdate:function(e){delete m[e]},get data(){return f},filtered:function(){return i().then(function(e){return f.filtered=e,e})},request:function(e){return c(e)},search:function(e){e&&(f.persist.item=e),this.searched()},persist:function(e,t){f.persist={params:e,data:t}},searched:function(){f.searched=f.persist,this.hide()},show:function(e){this.hide().then(function(t){var n=e.location.split(" ").reverse().map(function(e){return+e});d=L.popup().setLatLng(n).setContent(e.name+"<br/>Lat/Lng: "+n[0]+"&deg;"+n[1]+"&deg;").openOn(t)})},hide:function(e){return r.getMap().then(function(e){return d&&e.removeLayer(d),e})}};return r.getMap().then(function(e){var t;e.on("resize moveend viewreset",function(){n.cancel(t),f.searched||(t=n(function(){h.filtered()},200),m.forEach(function(e){e()}))})}),h}e.module("placenames.search",["placenames.facets","placenames.featuretypes","placenames.authorities"]).directive("pnClear",["pnSearchService",function(e){return{link:function(t,n){function a(){if(n.is(":focus")){var e=$.Event("keydown");e.which=27,n.trigger(e),n.blur()}}e.onMapUpdate(a)}}}]).directive("pnOptions",["pnSearchService",function(e){return{link:function(t){t.leave=function(){e.hide()},t.enter=function(){e.show(t.match.model)},t.$destroy=function(){e.hide()}}}}]).directive("pnSearch",["$timeout","pnFacetsService","pnSearchService",function(e,t,n){return{templateUrl:"placenames/search/search.html",restrict:"AE",link:function(e){e.state=n.data,e.status={classOpen:!1},e.$watch("state.searched",function(e,t){!e&&t&&n.filtered()}),n.filtered(),e.update=function(){n.filtered()},e.loadOnEmpty=function(){e.state.filter||n.filtered()},e.search=function(e){n.search(e)},e.select=function(t){e.search(t)},e.deselect=function(e){e.selected=!1,n.filtered()},e.loadDocs=function(){return n.filtered().then(function(e){return e.response.docs})},e.$watch("status.classOpen",function(n){n&&!e.classifications&&(e.classifications=!0,t.getClassifications().then(function(t){e.state.classifications=t}))}),e.$watch("status.open",function(n){n&&!e.featureCodes&&(e.featureCodes=!0,t.getFeatureCodes().then(function(t){e.state.featureCodes=t}))}),e.$watch("status.authOpen",function(n){n&&!e.authorities&&(e.authorities=!0,t.getAuthorities().then(function(t){e.state.authorities=t}))})}}}]).filter("pnDocName",[function(){return function(e){return e?e.map(function(e){return e.name+" ("+e.recordId+")"}):[]}}]).filter("pnSomeSelected",[function(){return function(e){return!!e&&Object.keys(e).some(function(t){return e[t].selected})}}]).filter("pnUnselectedFacets",[function(){return function(e){return e?e.filter(function(e){return!e.selected}):[]}}]).filter("pnSelectedFacets",[function(){return function(e){return e?e.filter(function(e){return e.selected}):[]}}]).filter("pnClean",[function(){return function(e){return e.replace(/\s?[, ]\s?/g," ")}}]).filter("pnTooltip",[function(){return function(e){var t="<div style='text-align:left'>";return e.variant&&!function(){var n=e.variant.split("|");n.forEach(function(e,a){t+=a?"":"Also known as",t+=(a&&a<n.length-1?",":"")+" ",a&&a===n.length-1&&(t+="or "),t+=e}),t+="<br/>"}(),t+="Lat "+e.location.split(" ").reverse().join("&deg; Lng ")+"&deg;<br/>Classification: "+e.classification+"</div>"}}]).factory("pnSearchService",t),t.$inject=["$http","$rootScope","$timeout","configService","mapService"]}(angular),function(e){e.module("placenames.pills",[]).directive("pnPills",[function(){return{restrict:"EA",templateUrl:"placenames/pills/pills.html",bindToController:{pills:"=",update:"&"},controller:function(){this.clear=function(e){e.selected=!1,this.update()}},controllerAs:"pp"}}])}(angular),function(e){e.module("placenames.toolbar",[]).directive("pnToolbar",[function(){return{controller:"toolbarLinksCtrl"}}]).directive("pnToolbarRow",[function(){var e="Satellite to Topography bias on base map.";return{scope:{map:"=",overlaytitle:"=?"},restrict:"AE",templateUrl:"placenames/toolbar/toolbar.html",link:function(t){t.overlaytitle=t.overlaytitle?t.overlaytitle:e}}}]).controller("toolbarLinksCtrl",["$scope","configService",function(e,t){var n=this;t.getConfig().then(function(e){n.links=e.toolbarLinks}),e.item="",e.toggleItem=function(t){e.item=e.item===t?"":t}}])}(angular),function(e){e.module("placenames.utils",[]).filter("pnSplitBar",function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return e.split("|").forEach(function(e,n,a){t+=(n&&n<a.length-1?",":"")+" ",n&&n===a.length-1&&(t+="or "),t+=e}),t}}).filter("pnFeature",["configService",function(e){var t;return e.getConfig("featureCodes").then(function(e){t=e}),function(e){var n=t?t[e]:e;return n?n:e}}]).filter("pnGoogleLink",function(){var e="https://www.google.com.au/maps/place/${name}/@${lat},${lng},14z";return function(t){if(!t)return"";var n=t.location.split(" ");return e.replace("${name}",t.name).replace("${lng}",n[0]).replace("${lat}",n[1])}}).factory("pnUtilsService",["configService",function(e){var t={};return t}])}(angular),angular.module("placenames.templates",[]).run(["$templateCache",function(e){e.put("placenames/authorities/authorities.html",'<div ng-repeat="item in pa.authorities | pnUnselectedFacets" class="row">\r\n   <div class="col-md-12 ellipsis" title=\'Jurisdiction: {{item.jurisdiction}}\'>\r\n      <input type="checkbox" ng-model="item.selected" ng-change="pa.update()" />\r\n      <span>\r\n         <a target="_blank" href="http://www.google.com/search?q={{item.name}}">{{item.name}}</a>\r\n         ({{(item.count | number) + (item.count || item.count == 0?\' of \':\'\')}}{{item.total | number}})\r\n      </span>\r\n   </div>\r\n</div>'),e.put("placenames/classifications/classifications.html",'<div ng-repeat="item in pc.classifications | pnUnselectedFacets" class="row">\r\n   <div class="col-md-12 ellipsis" title=\'Across all authorities there are a total of {{item.total | number}} features classed as "{{item.name}}"\'>\r\n      <input type="checkbox" ng-model="item.selected" ng-change="pc.update()" />\r\n      <span>\r\n         <a target="_blank" href="http://www.google.com/search?q={{key}}">{{item.name}}</a>\r\n         ({{(item.count | number) + (item.count || item.count == 0?\' of \':\'\')}}{{item.total | number}})\r\n      </span>\r\n   </div>\r\n</div>'),e.put("placenames/featuretypes/featuretypes.html",'<div ng-repeat="facet in vm.types | pnHasName | pnUnselectedFacets | orderBy:\'name\'" class="row">\r\n   <div class="col-md-12 ellipsis">\r\n      <input type="checkbox" ng-model="facet.selected" ng-change="vm.update()" />\r\n      <span tooltip-append-to-body="true" tooltip-placement="top-left" uib-tooltip="{{facet.name}}">\r\n         <a target="_blank" href="http://www.google.com/search?q={{facet.name | pnClean}}">{{facet.name}}</a>\r\n         ({{(facet.count | number) + (facet.count || facet.count == 0?\' of \':\'\')}}{{facet.total | number}})\r\n      </span>\r\n   </div>\r\n</div>'),e.put("placenames/header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n    <div class="navbar-header">\r\n\r\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n            <span class="sr-only">Toggle navigation</span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n        </button>\r\n\r\n        <a href="/" class="appTitle visible-xs"><h1 style="font-size:120%">{{heading}}</h1></a>\r\n    </div>\r\n    <div class="navbar-collapse collapse ga-header-collapse">\r\n        <ul class="nav navbar-nav">\r\n            <li class="hidden-xs"><a href="/"><h1 class="applicationTitle">{{heading}}</h1></a></li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right nav-icons">\r\n        \t<li common-navigation current="current" role="menuitem" style="padding-right:10px"></li>\r\n\t\t\t<li mars-version-display role="menuitem"></li>\r\n\t\t\t<li style="width:10px"></li>\r\n        </ul>\r\n    </div><!--/.nav-collapse -->\r\n</div>\r\n\r\n<!-- Strap -->\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="strap-blue">\r\n        </div>\r\n        <div class="strap-white">\r\n        </div>\r\n        <div class="strap-red">\r\n        </div>\r\n    </div>\r\n</div>'),e.put("placenames/panes/panes.html",'<div class="container contentContainer">\r\n\t<div class="row icsmPanesRow" >\r\n\t\t<div class="icsmPanesCol" ng-class="{\'col-md-12\':!view, \'col-md-7\':view}" style="padding-right:0">\r\n\t\t\t<div class="expToolbar row noPrint" pn-toolbar-row map="root.map" ></div>\r\n\t\t\t<div class="panesMapContainer target" geo-map configuration="data.map">\r\n\t\t\t    <geo-extent></geo-extent>\r\n\t\t\t</div>\r\n    \t\t<div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n    \t\t<div pn-tabs class="icsmTabs"  ng-class="{\'icsmTabsClosed\':!view, \'icsmTabsOpen\':view}"></div>\r\n\t\t</div>\r\n\t\t<div class="icsmPanesColRight" ng-class="{\'hidden\':!view, \'col-md-5\':view}" style="padding-left:0; padding-right:0">\r\n\t\t\t<div class="pn-tab-content-item" ng-show="view == \'search\'" ><pn-search></pn-search></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),e.put("placenames/panes/tabs.html",'<!-- tabs go here -->\r\n<div id="panesTabsContainer" class="paneRotateTabs" style="opacity:0.9" ng-style="{\'right\' : contentLeft +\'px\'}">\r\n\t<div class="paneTabItem" ng-class="{\'bold\': view == \'search\'}" ng-click="setView(\'search\')">\r\n\t\t<button class="undecorated">Search</button>\r\n\t</div>\r\n</div>\r\n'),e.put("placenames/results/item.html",'<div>\r\n<div class="container-fluid">\r\n   <div class="row">\r\n      <div class="col-md-12 pn-header" >\r\n         <button type="button" class="undecorated" ng-click="vm.showPan(vm.item)"\r\n                tooltip-append-to-body="true" title="Zoom to location and mark." tooltip-placement="left" uib-tooltip="Zoom to location and mark">\r\n            <i class="fa fa-lg fa-flag-o"></i>\r\n         </button>\r\n         <span><a ng-href="{{vm.item | pnGoogleLink}}" target="_google"\r\n            title="View in Google maps. While the location will always be correct, Google will do a best guess at matching the Gazetteer name to its data.">{{vm.item.name}}</a></span>\r\n         <span class="pull-right">Record ID: {{vm.item.recordId}}</span>\r\n      </div>\r\n   </div>\r\n</div>\r\n<div ng-if="!vm.feature" style="padding:20px 10px 130px;"><i class="fa-spinner fa-spin fa fa-lf"></i>Loading full data&hellip;</div>\r\n<div class="container-fluid" ng-if="vm.feature">\r\n   <div class="row" ng-if="vm.feature.attributes.Variant_Name">\r\n      <div class="col-md-4">Variant Name</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Variant_Name | pnSplitBar}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">State</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.State}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Feature Type</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Feature_code | pnFeature}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Classification</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Classification}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">CGDN</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.CGDN}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Concise Gazetteer</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Concise_gaz}}</div>\r\n   </div>\r\n   <div class="row" ng-if="vm.feature.attributes.Map_100K">\r\n      <div class="col-md-4">1:100K Map Index</div>\r\n      <div class="col-md-8"><span class="pn-numeric">{{vm.feature.attributes.Map_100K}}</span></div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Authority</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Authority_ID}}</div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-4">Status Description</div>\r\n      <div class="col-md-8">{{vm.feature.attributes.Status_desc}}</div>\r\n   </div>\r\n   <div class="row" ng-if="vm.feature.attributes.Lat_minutes">\r\n      <div class="col-md-4">Latitude</div>\r\n      <div class="col-md-4">\r\n         <span class="pn-numeric">\r\n            {{vm.feature.attributes.Lat_degrees}}&deg;\r\n            {{vm.feature.attributes.Lat_minutes}}&prime;\r\n            {{vm.feature.attributes.Lat_seconds}}&Prime;\r\n         </span>\r\n      </div>\r\n      <div class="col-md-4">\r\n         <span class="pn-numeric">\r\n            {{vm.feature.attributes.Latitude}}&deg;\r\n         </span>\r\n      </div>\r\n   </div>\r\n\r\n   <div class="row" ng-if="!vm.feature.attributes.Lat_minutes">\r\n      <div class="col-md-4">Latitude</div>\r\n      <div class="col-md-8">\r\n         <span class="pn-numeric">\r\n            {{vm.feature.attributes.Latitude}}&deg;\r\n         </span>\r\n      </div>\r\n   </div>\r\n\r\n   <div class="row" ng-if="vm.feature.attributes.Long_minutes">\r\n      <div class="col-md-4">Longitude</div>\r\n      <div class="col-md-4"><span class="pn-numeric">\r\n         {{vm.feature.attributes.Long_degrees}}&deg;\r\n         {{vm.feature.attributes.Long_minutes}}&prime;\r\n         {{vm.feature.attributes.Long_seconds}}&Prime;\r\n         </span>\r\n      </div>\r\n      <div class="col-md-4">\r\n         <span class="pn-numeric">\r\n         {{vm.feature.attributes.Longitude}}&deg;</span></div>\r\n   </div>\r\n\r\n   <div class="row" ng-if="!vm.feature.attributes.Long_minutes">\r\n      <div class="col-md-4">Longitude</div>\r\n      <div class="col-md-8">\r\n         <span class="pn-numeric">\r\n         {{vm.feature.attributes.Longitude}}&deg;</span></div>\r\n   </div>\r\n   <div class="row" style="padding-top:5px; padding-bottom:5px; background-color:#f8f8ff;border-top:1px solid #f0f0f0">\r\n      <div class="col-md-12">Download as:\r\n         <span class="pull-right">\r\n            [<a href"javascript:void()" ng-click="vm.download(\'wfs\')">WFS Get Feature</a>]\r\n         </span>\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/results/results.html",'<div class="panel panel-default pn-container" ng-if="pr.data.searched" common-scroller more="pr.more()" ng-if="pr.data.searched">\r\n   <div class="panel-heading" style="min-height:25px">\r\n      <a href="#" ng-click="pr.clear()" uib-tooltip="Clear results and return to search" tooltip-placement="right">\r\n         <i class="fa fa-angle-double-left" aria-hidden="true"></i>\r\n      </a>\r\n      <span ng-if="pr.data.searched.item">\r\n         Showing selected feature\r\n      </span>\r\n      <span ng-if="!pr.data.searched.item">\r\n         Matched {{pr.data.searched.data.response.numFound | number}} features,\r\n         <a href"javascript:void()" ng-click="pr.download()" uib-tooltip="Download listed features in ESRI JSON format" tooltip-placement="bottom">\r\n            download {{pr.data.searched.data.response.docs.length | number}} features\r\n            <i class="fa fa-download"></i>\r\n         </a>\r\n      </span>\r\n      <a href"javascript:void()" ng-if="!pr.data.searched.item" ng-click="pr.more()" tooltip-placement="top"  class="pull-right"\r\n               uib-tooltip="Scroll to the bottom of results or click here to load more matching features">\r\n         [Load more...]\r\n      </a>\r\n   </div>\r\n   <div class="panel-heading">\r\n      <pn-results-item ng-if="pr.data.searched.item" item="pr.data.searched.item"></pn-results-item>\r\n      <div class="pn-results-list" ng-if="!pr.data.searched.item" ng-repeat="doc in pr.data.searched.data.response.docs">\r\n         <pn-results-item item="doc"></pn-results-item>\r\n      </div>\r\n   </div>\r\n</div>'),e.put("placenames/search/search.html",'<div class="pn-search-container">\r\n   <pn-results ng-if="state.searched" data="state"></pn-results>\r\n   <div style="float:clear" ng-show="!state.searched">\r\n      <h4 style="font-size:12">Search by map location, partial name match or feature type</h4>\r\n      <div class="search-text">\r\n         <div class="input-group input-group-sm">\r\n            <span class="input-group-addon" id="names1">Filter:</span>\r\n\r\n            <input type="text" ng-model="state.filter" placeholder="Match by feature name..." ng-model-options="{ debounce: 300}"\r\n                  typeahead-on-select="select($item, $model, $label)" typeahead-template-url="placenames/search/typeahead.html"\r\n                  class="form-control" typeahead-min-length="0" uib-typeahead="doc as doc.name for doc in loadDocs(state.filter)"\r\n                  typeahead-loading="loadingLocations" typeahead-no-results="noResults" pn-clear>\r\n\r\n            <span class="input-group-btn">\r\n            <button class="btn btn-primary" type="button" ng-click="search()" ng-disabled="!state.persist.data || !state.filtered.response.numFound">Search</button>\r\n         </span>\r\n         </div>\r\n      </div>\r\n      <div class="clearfix">\r\n         <div>\r\n            <strong style="float:right">Found {{state.filtered.response.numFound | number}} features</strong>\r\n            <pn-featuretypes-pills ng-if="state.featureCodes.length" features="state.featureCodes" update="update()"></pn-featuretypes-pills>\r\n            <pn-classifications-pills ng-if="state.classifications.length" classifications="state.classifications" update="update()"></pn-classifications-pills>\r\n            <pn-authorities-pills ng-if="state.authorities.length" authorities="state.authorities" update="update()"></pn-authorities-pills>\r\n         </div>\r\n      </div>\r\n      <uib-accordion close-others="oneAtATime">\r\n         <div uib-accordion-group class="panel-default" is-open="status.open">\r\n            <uib-accordion-heading>\r\n               <span class="pn-featuretypes-swathe"></span>\r\n               Filter by feature type...\r\n               <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i>\r\n            </uib-accordion-heading>\r\n            <pn-featuretypes ng-if="status.open" types="state.featureCodes" update="update()"></pn-featuretypes>\r\n         </div>\r\n         <div uib-accordion-group class="panel-default" is-open="status.classOpen">\r\n            <uib-accordion-heading>\r\n               <span class="pn-classifications-swathe"></span>\r\n               Filter by classification...\r\n               <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.classOpen, \'glyphicon-chevron-right\': !status.classOpen}"></i>\r\n            </uib-accordion-heading>\r\n            <pn-classifications classifications="state.classifications" update="update()" ng-if="status.classOpen"></pn-classifications>\r\n         </div>\r\n         <div uib-accordion-group class="panel-default" is-open="status.authOpen">\r\n            <uib-accordion-heading>\r\n               <span class="pn-authorities-swathe"></span>\r\n               Filter by authority...\r\n               <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.authOpen, \'glyphicon-chevron-right\': !status.authOpen}"></i>\r\n            </uib-accordion-heading>\r\n            <pn-authorities authorities="state.authorities" update="update()" ng-if="status.authOpen"></pn-authorities>\r\n         </div>\r\n      </uib-accordion>\r\n   </div>\r\n</div>'),e.put("placenames/search/typeahead.html",'<a pn-options ng-mouseenter="enter()" ng-mouseleave="leave()"  tooltip-append-to-body="true"\r\n               tooltip-placement="left" uib-tooltip-html="match.model | pnTooltip">\r\n   <span ng-bind-html="match.model.name | uibTypeaheadHighlight:query"></span>\r\n   (<span ng-bind-html="match.model.recordId"></span>)\r\n</a>'),e.put("placenames/pills/pills.html",'<span class="btn btn-primary btn-xs pn-pill" ng-repeat="type in pp.pills | pnSelectedFacets" tooltip-append-to-body="true" tooltip-placement="left" uib-tooltip="{{type.name}}">\r\n   <span style="max-width:100px;display:inline-block;" class="ellipsis">{{type.name}}</span>\r\n   <span style="max-width:100px;display:inline-block;" class="ellipsis"> ({{type.count?type.count:0 | number}})\r\n      <a ng-click="pp.clear(type)" href="javascript:void(0)">\r\n         <i class="fa fa-close fa-xs" style="color: white"></i>\r\n      </a>\r\n   </span>\r\n</span>'),
e.put("placenames/toolbar/toolbar.html",'<div pn-toolbar>\r\n\t<div class="row toolBarGroup">\r\n\r\n\t\t<div class="pull-right">\r\n\t\t\t<div class="btn-toolbar radCore" role="toolbar"  pn-toolbar>\r\n\t\t\t\t<div class="btn-group">\r\n\t\t\t\t\t<!-- < icsm-state-toggle></icsm-state-toggle> -->\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="btn-toolbar" style="margin-right:10px;display:inline-block">\r\n\r\n\t\t\t\t<div class="btn-group" title="Place names data density transparency">\r\n\t\t\t\t\t<span class="btn btn-default" common-baselayer-control max-zoom="16"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>')}]);